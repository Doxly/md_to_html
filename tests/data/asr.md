# АСР Водоканала


##1. Модуль НСИ и картотек

Модуль НСИ и картотек предназначен для ведения данных нормативно-справочной информации и картотек Системы, и обеспечения доступа к ним других подсистем и модулей Системы. 
Работа с данными НСИ и картотек может быть осуществлена как через интерфейс модуля, так и через интерфейсы других подсистем и модулей Системы, в которых используются указанные данные. 

###1.1. Подсистема НСИ

####Подсистема НСИ обеспечивает:

* Унификацию шаблонов хранения данных справочников; 
* Универсальные механизмы пакетной загрузки-выгрузки данных;
* Универсальные программные интерфейсы с внешними системами;
* Пользовательские интерфейсы для поиска, отображения, ввода и изменения данных в справочниках.

####Дополнительная функциональность, (если указана в требованиях к конкретному справочнику):

* файловая или программная загрузка-выгрузка данных для справочников;
* Программная синхронизация с внешней системой;
* Версионное хранение данных;
* Регистрация истории модификации данных;
* Запрет физического удаления данных.


####НСИ обеспечивает (!!!) поддержание следующих групп справочников (в объеме, необходимом для функционирования системы):

* Адресные;
* Информационные;
* Тарификационные;
* Технические;
* Служебные.

####Дополнительные требования к ведению справочников НСИ:

##### Адресные справочники

* Ведение почтовых адресов;
* синхронизация почтовых адресов с общероссийским классификатором ФИАС;
* Ведение *кадастровых* адресов;
* *Синхронизация кадастровых адресов с Росреестром*;
* Версионное хранение адресной информации.

##### Информационные справочники

##### Тарификационные справочники

* Версионное хранение информации

##### Технические справочники

##### Служебные справочники

* Создание пользовательских справочников для использования в модуле Картотек и реестров

###1.2. Подсистема картотек
####Подсистема картотек обеспечивает:

* Унифицированные структуры хранения данных картотек;
* Пользовательские интерфейсы для поиска, отображения, ввода и изменения данных картотек;
* Регистрация истории модификации данных.

####Дополнительная функциональность, (если указана в требованиях к конкретной картотеке):

* Версионное хранение данных;
* Создание дополнительных пользовательских атрибутов, с возможностью ввода данных с клавиатуры или выбора из справочников.

####Подсистема обеспечивает ведение следующих картотек:

* Картотека абонентов;
* Картотека объектов;
* Картотека приборов учета;
* Картотека договоров;

####Дополнительные требования к ведению справочников картотек:

##### Картотека абонентов

* Ведение дополнительных пользовательских атрибутов

##### Картотека объектов

* Ведение дополнительных пользовательских атрибутов

##### Картотека приборов учета

##### Картотека договоров



##2.  Модуль Биллинг

###2.1.    Подсистема расчета начислений

####2.1.1.  Прием показаний приборов учета

####Функционал приема показаний приборов учета обеспечивает:

* Пользовательский интерфейс для ввода, изменения и просмотра показаний приборов учета;
* Регистрация показаний через личный кабинет абонента;
* Контроль вводимых показаний по заданным правилам;
* Файловая загрузка-выгрузка показаний.

####2.1.2.  Расчет объемов потребления

####Функционал расчета объемов потребления обеспечивает:

* Расчет объемов водоснабжения по данным приборов учета;
* Расчетов объемов водоснабжения по нормативам;
* Расчет объемов водоотведения.

###2.2.    Тарификатор

####Тарификатор обеспечивает:

* Определение перечня предоставляемых по договору услуг;
* Вычисление объема предоставляемых услуг;
* Применение действующих на момент предоставления услуг тарифов (вычисление стоимости услуг);
* Применение действующих скидок/наценок;
* Формирование разовых начислений за сверхнормативные сбросы (!!!).

###2.3. Подсистема учета платежей

####Подсистема учета платежей обеспечивает:

* Пользовательский интерфейс для ввода и просмотра платежей;
* Файловую загрузку платежей;
* Регистрацию банковской выписки;
* Работу с отсевом платежей;
* Регистрация платежей on-line, в том числе оплата из личного кабинета;
* Пользовательский интерфейс для ввода и просмотра перерасчетов и возвратов платежей;
* ___Распределение платежа при поступлении___. 

###2.4. Подсистема перерасчетов начислений 

####Подсистема перерасчетов начислений обеспечивает:

* Пользовательский интерфейс для ввода перерасчетов; 
* Определение реестра абонентов и объектов для проведения перерасчетов;
* Расчет размера и формирование перерасчетов;
* Автоматическое формирование перерасчетов;
* Файловая загрузка перерасчетов;
* Учет оснований для проведения перерасчетов.
   
###2.5. Подсистема расчета баланса

####Подсистема расчета баланса обеспечивает:

* Расчет и хранение баланса по договору на начало/окончание расчетного периода (закрытие расчетного периода);
* Расчет и хранение баланса по договору в соответствии с кратностью выставления счетов (?????); 
* Расчет текущего (on-line) баланса по договору;
* Распределение оплат по выставленным счетам;
* Расчет суммарного баланса по всем договорам абонента;
* Расчет баланса по услугам договора.


###2.6. Подсистема платежных документов

####Подсистема платежных документов обеспечивает:

* Формирование массива данных для платежных документов. Формирование данных для счетов-фактур осуществляется модулем книги продаж;
* Пакетирование (формирование комплекта платежных документов для каждого абонента);
* Массовую печать сформированных пакетов документов с разбиением потока печати по пунктам доставки и по пачкам;
* Печать единичных платежных документов. 


###2.7. Подсистема книги продаж

####Подсистема книги продаж обеспечивает:

* Формирование первичных документов для исчисления НДС (счетов-фактур);
* Исчисление суммы налога на добавленную стоимость с учетом вхождения/не вхождения НДС в тариф;
* Формирование исправленных и корректировочных счетов-фактур;
* Формирование основных и дополнительных листов книг продаж и покупок за месяц/квартал;
* Автоматизированную диагностику книг продаж/покупок с предоставлением реестра расхождений финансовых данных системы;
* Экспорт книг продаж/покупок (форматы экспорта определяются на этапе проектирования системы).


###2.9. Подсистема пени

####Подсистема пени обеспечивает:

* Определение суммы задолженности с учетом сроков образования и формирование списков договоров для начисления пени;
* Начисление пени согласно параметрам договора;
* Учет оплат пени и ведение баланса по пени;
* Корректировку баланса по пени;
* Формирование документов по пени. В т.ч. расшифровок и оборотной ведомости по пени.



##3.  Модуль Работы с клиентами (CRM)

###3.1. Подсистема документооборота

Подсистема документооборота является гибким механизмом создания документов и настройки их маршрутов для применения в подсистемах и модулях Системы. 

####Подсистема документооборота обеспечивает:

* Ведение нескольких видов документов, с различными наборами атрибутов;
* Ведение сложных схем обработки документов с возможностью настройки бизнес-правил. Поддерживается параллельные или последовательные операции, условная маршрутизация, ветвление, слияние, циклы;
* Изменение атрибутов документов и выполнение операций над документами;
* Прикрепление внешних файлов к документу;
* Ведение состояний документов;
* Управление доступом к атрибутам и операциям над документами;
* Распределение документов по исполнителям;
* Контроль сроков выполнения операций;
* Формирование отчетности по операциям над документами;
* Оповещение об изменении состояний документов.


###3.2. Подсистема договорной работы

Подсистема Договорной работы автоматизирует процесс работы с договорами от поступления заявки на присоединение до расторжения договора. Состав информации документов, их обработка и маршрутизация осуществляются подсистемой документооборота.

#### Подсистема Договорной работы обеспечивает:

* Преддоговорную работу, подготовку разрешительной документации;
* Заключение договоров, корректировка договоров;
* Иерархическую подчиненность договоров;
* Формирование дополнительных соглашений;
* Расторжение договоров;
* Ведение баланса водопотребления/водоотведения в разрезе вводов и выпусков объектов;
* Формирование внешнего вида и печать документов обеспечивается средствами модуля построения отчетов.

####Преддоговорная работа включает в себя:

* Регистрация заявок на присоединение;
* Формирование ТУ;
* Формирование заключений по проекту;
* Формирование согласований присоединения;
* Формирование заявок на акты разграничения;
* Формирование актов разграничения.

###3.3. Подсистема управления обращениями

Подсистема Управления обращениями предназначен для регистрации и маршрутизации  всех обращений абонентов. В ходе обработки обращения могут запускаться процессы других модулей и подсистем (договорной работы, платежных документов).

#### Подсистема управления обращениями обеспечивает:

* регистрация обращений из различных источников поступления (личное обращение, телефон, e-mail, личный кабинет);
* Регистрация обращений различных типов (информационно-справочное обслуживание, претензии по расчетам, аварии и отключения);
* Назначение приоритета обращений;
* Распределение обращений (e-mail, личный кабинет) по исполнителям обеспечивается средствами модуля документооборота;
* Маршрутизация обращения в зависимости от его типа и контроль сроков обработки обеспечивается средствами модуля документооборота;
* Передача обращения в стороннюю систему ("горячая линия");
* Получение результата обработки заявки в сторонней системе.

###3.4. Подсистема работы с дебиторской задолженностью

####Подсистема работы с дебиторской задолженностью обеспечивает:

* Определение суммы задолженности с учетом сроков образования и формирование списков должников;
* Планирование и контроль мероприятий по взысканию дебиторской задолженности;
* Автоматический мониторинг поступивших платежей с пересчетом суммы задолженности;
* Формирование документов в т.ч. акты сверки задолженностей, исковые требования, отчеты по срокам образования;
* Информирование абонентов с помощью интерфейсов с платформами голосового, sms и e-mail оповещения.

###3.5. Подсистема информирования абонентов

#### Подсистема информирования абонентов обеспечивает:

* Разовое или периодическое информирование абонентов;
* Формирование списка абонентов для информирования по заданным критериям;
* Распределение списка по потокам доставки сообщений (sms, e-mail или автоматическое голосовое оповещение);
* Формирование текста сообщений;
* Информирование абонентов с помощью интерфейсов с платформами голосового, sms и e-mail оповещения;
* Формирование статистической отчетности по сообщениям.

###3.6. Подсистема самообслуживание абонентов (личный кабинет)

#### Подсистема самообслуживания абонентов обеспечивает:

* Доступ к публичной информации по деятельности предприятия;
* Авторизация абонентов в личном кабинете;
* Доступ к личной информации абонента (данные договоров, данные по расчетам и т.д.);
* Создание обращений; 
* Формирование и печать заявлений и квитанций; 
* Ввод показаний приборов учета;
* Ввод информации о планируемом объеме водопотребления/водоотведения.

###3.7. Подсистема архива документации

#### Подсистема архива документации обеспечивает:

* Хранение данных о местоположении оригиналов договоров и разрешительной документации;
* Постановку документов на архивный учет;
* Регистрация заявок на выдачу документов;
* Учет выданных документов.

###3.8 Подсистема инвентаризации объектов

Подсистема предназначена для ведения результатов инвентаризации объектов и сведений об абонентах.

####Подсистема инвентаризации объектов обеспечивает:

* Формирование актов обследования и паспортов объектов
* Ведение информации о результатах обследования объектов
 

###3.9  Экологическая инвентаризация

Подсистема предназначена для регистрации информации о фактических и возможных сбросах по количеству и химическому составу, описаний технологических процессов промышленных объектов.

#### Подсистема Экологической инвентаризации обеспечивает:

* Регистрация актов обследования объектов;
* Ведение информации о технологических процессах промышленных объектов;
* Ведение информации о фактических и возможных сбросах; 
* Ведение информации о характеристиках очистных сооружений объектов.



##4.    Модуль отчетности

###4.1.    Подсистема агрегации данных

Подсистема агрегации данных предназначена для подготовки и хранения данных в заранее определенных разрезах для дальнейшего их использования 
в других подсистемах и модулях Системы, например при формировании платежных документов, создании отчетов и выгрузки данных в сторонние системы.

####Подсистема агрегации данных обеспечивает:

* Унификация алгоритмов агрегации данных системы;
* Число разрезов агрегации конечно и определяется на этапе проектирования системы;
* Агрегацию данных закрытых расчетных периодов.

####Состав данных для агрегации:

* Данные по начислениям;
* Данные по оплатам;
* Данные по потреблению ресурсов в натуральных показателях;
* Данные по дебиторской и кредиторской задолженностям.


###4.2. Подсистема настройки отчетов

Подсистема настройки отчетов представляет собой гибкий механизм для настройки внешнего вида и состава данных для документов, необходимых к выгрузке или печати в различных подсистемах и модулях Системы. 

####Подсистема настройки отчетов обеспечивает:

* Пользовательский интерфейс для создания шаблонов отчетов Системы и их связи с моделями данных; 
* Функционал для формирования отчетов системы в форматах (doc, pdf, xls, xml, HTML);
* Функционал для автоматического формирования отчетов по заданному расписанию.


###4.3  Подсистема формирования отчетности

####Подсистема формирования отчетности обеспечивает формирование отчетов на основании данных системы:

* Оперативных данных (по состоянию на текущий момент времени);
* Агрегированных данных. 

#### Осуществляется формирование следующих видов отчетности:

* По натуральным показателям (оперативные или агрегированные данные);
* Финансовая и бухгалтерская (агрегированные данные);
* Оперативная технологическая (оперативные данные);
* Управленческая (оперативные данные).

Перечень и форматы отчетов каждого вида определяются на этапе проектирования системы. 



##5. Модуль интеграционные решения


###5.1. Подсистема Файлового обмена данными

####Подсистема файлового обмена данными обеспечивает:

* Универсальный функционал по настройке шаблонов импорта/экспорта данных;
* Функционал для работы с FTP ресурсами;
* Функционал для работы с данными в архивах;
* Функционал для проверки ЭЦП;
* Функционал для автоматического обмена данными; 
* Пользовательские интерфейсы для мониторинга и настройки процессов обмена;
* Контроль загружаемых данных по заданным правилам;
* Пакетную обработку загруженных данных.

###5.2. Подсистема API с внешними системами

Значительная часть интерфейсов с внешними системами реализуется с соблюдением спецификации существующих интерфейсов МИС ЦРА.

#### Новые интерфейсы с внешними системами обеспечивают:
* Асинхронные вызовы
* Восстановление логической целостности данных в случае сбоев в процессе работы API;
* Регистрацию всей информации вызовов, включая параметры, успешность операций и возвращенные результаты;
* Двухступенчатое фиксирование транзакций, в случае необходимости транзакционной обработки данных;
* Упаковку параметров вызовов и результатов в формате XML;
* Проверка XML-данных с помощью схем XML-документов, разработанных для каждого интерфейса.


##6.    Авторизация и контроль доступа

####Модуль Авторизации и контроля доступа обеспечивает:

* Создание, изменение и просмотр пользователей Системы;
* Объединение пользователей в группы; 
* Установка индивидуальных и групповых ограничений/разрешений;
* Контроль доступа пользователей к системе согласно заданным настройкам.

####Объекты контроля доступа:

* Модули и подсистемы;
* Отдельные операции и процессы;
* Пользовательские интерфейсы
* Элементы пользовательских интерфейсов;
* Таблицы базы данных;
* Записи таблиц базы данных.


